!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={};var n={disposable:function(t){var e=!1;return function(){e||(e=!0,t())}},invariant:function(t,e){if(!t)throw new Error(e)},fetchWithTimeout:function(t,e,n){if(window.AbortController){var r=new window.AbortController,o=window.fetch(t,Object.assign({},n,{signal:r.signal})),i=setTimeout((function(){r.abort()}),e);return o.finally((function(){clearTimeout(i)}))}return function(t,e,n){var r=new Promise((function(e,r){setTimeout((function(){r(new Error(n))}),t)}));return Promise.race([r,e])}(e,window.fetch(t,n),"Request Timeout")},camelCase:function(t){if(t)return t.toLowerCase().split(" ").reduce(((t,e,n)=>(t+=0===n?e:function(t){var e=t[0];return e<"\ud800"||e>"\udfff"?t[0].toUpperCase()+t.slice(1):t.slice(0,2).toUpperCase()+t.slice(2)}(e),t)),"")},isLocalStorageAccessible:function(){var t="__td__";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}},adlHeaders:{"Content-Type":"application/vnd.treasuredata.v1+json",Accept:"application/vnd.treasuredata.v1+json"},globalIdAdlHeaders:{"Content-Type":"application/vnd.treasuredata.v1.js+json",Accept:"application/vnd.treasuredata.v1.js+json"}};var r=function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t};var o=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)};var i=function(t){return!!t&&"object"==typeof t},s=i,a=Object.prototype.toString;var c=function(t){return"string"==typeof t||s(t)&&"[object String]"==a.call(t)},u=Array.prototype,l=Error.prototype,f=Object.prototype.propertyIsEnumerable,d=u.splice,h={};!function(){var t=function(){this.x=1},e={0:1,length:1},n=[];for(var r in t.prototype={valueOf:1,y:1},new t)n.push(r);h.enumErrorProps=f.call(l,"message")||f.call(l,"name"),h.enumPrototypes=f.call(t,"prototype"),h.nonEnumShadows=!/valueOf/.test(n),h.ownLast="x"!=n[0],h.spliceObjects=(d.call(e,0,1),!e[0]),h.unindexedChars="x"[0]+Object("x")[0]!="xx"}();var p=h,g=o,v=c,m=p;var _=function(t){if(m.unindexedChars&&v(t)){for(var e=-1,n=t.length,r=Object(t);++e<n;)r[e]=t.charAt(e);return r}return g(t)?t:Object(t)},y=_;var b=function(t){return function(e,n,r){for(var o=y(e),i=r(e),s=i.length,a=t?s:-1;t?a--:++a<s;){var c=i[a];if(!1===n(o[c],c,o))break}return e}}(),k=o,w=Object.prototype.toString;var S=function(t){return k(t)&&"[object Function]"==w.call(t)},C=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),j=S,E=C,x=i,A=/^\[object .+?Constructor\]$/,M=Object.prototype,I=Function.prototype.toString,O=M.hasOwnProperty,T=RegExp("^"+I.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var D=function(t){return null!=t&&(j(t)?T.test(I.call(t)):x(t)&&(E(t)?T:A).test(t))};var $=function(t,e){var n=null==t?void 0:t[e];return D(n)?n:void 0},P=_;var N=function(t){return function(e){return null==e?void 0:P(e)[t]}}("length");var L=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},U=N,R=L;var F=function(t){return null!=t&&R(U(t))},H=F,G=i,Y=Object.prototype,B=Y.hasOwnProperty,V=Y.propertyIsEnumerable;var W=function(t){return G(t)&&H(t)&&B.call(t,"callee")&&!V.call(t,"callee")},K=$,z=L,q=i,J=Object.prototype.toString,X=K(Array,"isArray")||function(t){return q(t)&&z(t.length)&&"[object Array]"==J.call(t)},Z=/^\d+$/;var Q=function(t,e){return e=null==e?9007199254740991:e,(t="number"==typeof t||Z.test(t)?+t:-1)>-1&&t%1==0&&t<e},tt=r,et=W,nt=X,rt=S,ot=Q,it=L,st=o,at=c,ct=p,ut="[object Error]",lt="[object Object]",ft="[object String]",dt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=Error.prototype,pt=Object.prototype,gt=String.prototype,vt=pt.hasOwnProperty,mt=pt.toString,_t={};_t["[object Array]"]=_t["[object Date]"]=_t["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},_t["[object Boolean]"]=_t[ft]={constructor:!0,toString:!0,valueOf:!0},_t[ut]=_t["[object Function]"]=_t["[object RegExp]"]={constructor:!0,toString:!0},_t[lt]={constructor:!0},tt(dt,(function(t){for(var e in _t)if(vt.call(_t,e)){var n=_t[e];n[t]=vt.call(n,t)}}));var yt=function(t){if(null==t)return[];st(t)||(t=Object(t));var e=t.length;e=e&&it(e)&&(nt(t)||et(t)||at(t))&&e||0;for(var n=t.constructor,r=-1,o=rt(n)&&n.prototype||pt,i=o===t,s=Array(e),a=e>0,c=ct.enumErrorProps&&(t===ht||t instanceof Error),u=ct.enumPrototypes&&rt(t);++r<e;)s[r]=r+"";for(var l in t)u&&"prototype"==l||c&&("message"==l||"name"==l)||a&&ot(l,e)||"constructor"==l&&(i||!vt.call(t,l))||s.push(l);if(ct.nonEnumShadows&&t!==pt){var f=t===gt?ft:t===ht?ut:mt.call(t),d=_t[f]||_t[lt];for(f==lt&&(o=pt),e=dt.length;e--;){var h=d[l=dt[e]];i&&h||!(h?vt.call(t,l):t[l]!==o[l])||s.push(l)}}return s},bt=W,kt=X,wt=Q,St=L,Ct=c,jt=yt,Et=Object.prototype.hasOwnProperty;var xt=F,At=o,Mt=function(t){for(var e=jt(t),n=e.length,r=n&&t.length,o=!!r&&St(r)&&(kt(t)||bt(t)||Ct(t)),i=-1,s=[];++i<n;){var a=e[i];(o&&wt(a,r)||Et.call(t,a))&&s.push(a)}return s},It=p,Ot=$(Object,"keys"),Tt=Ot?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?It.enumPrototypes:xt(t))?Mt(t):At(t)?Ot(t):[]}:Mt,Dt=b,$t=Tt;var Pt=function(t,e){return Dt(t,e,$t)},Nt=N,Lt=L,Ut=_;var Rt=function(t,e){return function(n,r){var o=n?Nt(n):0;if(!Lt(o))return t(n,r);for(var i=e?o:-1,s=Ut(n);(e?i--:++i<o)&&!1!==r(s[i],i,s););return n}}(Pt);var Ft=function(t){return t};var Ht=function(t,e,n){if("function"!=typeof t)return Ft;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}},Gt=Ht,Yt=X;var Bt=function(t,e){return function(n,r,o){return"function"==typeof r&&void 0===o&&Yt(n)?t(n,r):e(n,Gt(r,o,3))}}(r,Rt),Vt=i,Wt=Object.prototype.toString;var Kt=function(t){return"number"==typeof t||Vt(t)&&"[object Number]"==Wt.call(t)},zt=W,qt=X,Jt=F,Xt=S,Zt=i,Qt=c,te=Tt;var ee=function(t){return null==t||(Jt(t)&&(qt(t)||Qt(t)||zt(t)||Zt(t)&&Xt(t.splice))?!t.length:!te(t).length)},ne=Tt;var re=function(t,e,n){for(var r=-1,o=ne(e),i=o.length;++r<i;){var s=o[r],a=t[s],c=n(a,e[s],s,t,e);((c==c?c!==a:a==a)||void 0===a&&!(s in t))&&(t[s]=c)}return t};var oe=function(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n},ie=Tt;var se=function(t,e){return null==e?t:oe(e,ie(e),t)},ae=F,ce=Q,ue=o;var le=function(t,e,n){if(!ue(n))return!1;var r=typeof e;if("number"==r?ae(n)&&ce(e,n.length):"string"==r&&e in n){var o=n[e];return t==t?t===o:o!=o}return!1},fe=Math.max;var de=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=fe(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,o=fe(n.length-e,0),i=Array(o);++r<o;)i[r]=n[e+r];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,n[0],i);case 2:return t.call(this,n[0],n[1],i)}var s=Array(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=i,t.apply(this,s)}},he=Ht,pe=le,ge=de;var ve=re,me=se,_e=function(t){return ge((function(e,n){var r=-1,o=null==e?0:n.length,i=o>2?n[o-2]:void 0,s=o>2?n[2]:void 0,a=o>1?n[o-1]:void 0;for("function"==typeof i?(i=he(i,a,5),o-=2):o-=(i="function"==typeof a?a:void 0)?1:0,s&&pe(n[0],n[1],s)&&(i=o<3?void 0:i,o=1);++r<o;){var c=n[r];c&&t(e,c,i)}return e}))}((function(t,e,n){return n?ve(t,e,n):me(t,e)})),ye=Ht,be=yt;var ke=function(t){return function(e,n,r){return"function"==typeof n&&void 0===r||(n=ye(n,r,3)),t(e,n,be)}}(b);var we=function(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o};var Se=function(t,e,n){for(var r=t.length,o=e+(n?0:-1);n?o--:++o<r;){var i=t[o];if(i!=i)return o}return-1};var Ce=function(t,e,n){if(e!=e)return Se(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1},je=o;var Ee=function(t,e){var n=t.data;return("string"==typeof e||je(e)?n.set.has(e):n.hash[e])?0:-1},xe=o;var Ae=function(t){var e=this.data;"string"==typeof t||xe(t)?e.set.add(t):e.hash[t]=!0},Me=$,Ie=Me(t,"Set"),Oe=Me(Object,"create");function Te(t){var e=t?t.length:0;for(this.data={hash:Oe(null),set:new Ie};e--;)this.push(t[e])}Te.prototype.push=Ae;var De=Te,$e=$,Pe=$e(t,"Set"),Ne=$e(Object,"create");var Le=Ce,Ue=Ee,Re=function(t){return Ne&&Pe?new De(t):null};var Fe=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},He=W,Ge=X,Ye=F,Be=i;var Ve=function t(e,n,r,o){o||(o=[]);for(var i=-1,s=e.length;++i<s;){var a=e[i];Be(a)&&Ye(a)&&(r||Ge(a)||He(a))?n?t(a,n,r,o):Fe(o,a):r||(o[o.length]=a)}return o},We=_;var Ke=b,ze=yt;var qe=function(t,e){return Ke(t,e,ze)};var Je=we,Xe=function(t,e){var n=t?t.length:0,r=[];if(!n)return r;var o=-1,i=Le,s=!0,a=s&&e.length>=200?Re(e):null,c=e.length;a&&(i=Ue,s=!1,e=a);t:for(;++o<n;){var u=t[o];if(s&&u==u){for(var l=c;l--;)if(e[l]===u)continue t;r.push(u)}else i(e,u,0)<0&&r.push(u)}return r},Ze=Ve,Qe=Ht,tn=yt,en=function(t,e){t=We(t);for(var n=-1,r=e.length,o={};++n<r;){var i=e[n];i in t&&(o[i]=t[i])}return o},nn=function(t,e){var n={};return qe(t,(function(t,r,o){e(t,r,o)&&(n[r]=t)})),n},rn=de((function(t,e){if(null==t)return{};if("function"!=typeof e[0]){e=Je(Ze(e),String);return en(t,Xe(tn(t),e))}var n=Qe(e[0],e[1],3);return nn(t,(function(t,e,r){return!n(t,e,r)}))}));var on=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},sn=Object.prototype.hasOwnProperty;var an=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&sn.call(t,"index")&&(n.index=t.index,n.input=t.input),n},cn=t.ArrayBuffer,un=t.Uint8Array;var ln=function(t){var e=new cn(t.byteLength);return new un(e).set(new un(t)),e},fn="[object Float32Array]",dn="[object Float64Array]",hn="[object Int8Array]",pn="[object Int16Array]",gn="[object Int32Array]",vn="[object Uint8Array]",mn="[object Uint8ClampedArray]",_n="[object Uint16Array]",yn="[object Uint32Array]",bn=/\w*$/,kn=t.Uint8Array,wn={};wn[fn]=t.Float32Array,wn[dn]=t.Float64Array,wn[hn]=t.Int8Array,wn[pn]=t.Int16Array,wn[gn]=t.Int32Array,wn[vn]=kn,wn[mn]=t.Uint8ClampedArray,wn[_n]=t.Uint16Array,wn[yn]=t.Uint32Array;var Sn=on,Cn=r,jn=se,En=Pt,xn=an,An=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return ln(t);case"[object Boolean]":case"[object Date]":return new r(+t);case fn:case dn:case hn:case pn:case gn:case vn:case mn:case _n:case yn:r instanceof r&&(r=wn[e]);var o=t.buffer;return new r(n?ln(o):o,t.byteOffset,t.length);case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":var i=new r(t.source,bn.exec(t));i.lastIndex=t.lastIndex}return i},Mn=function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e},In=X,On=C,Tn=o,Dn="[object Arguments]",$n="[object Function]",Pn="[object Object]",Nn={};Nn[Dn]=Nn["[object Array]"]=Nn["[object ArrayBuffer]"]=Nn["[object Boolean]"]=Nn["[object Date]"]=Nn["[object Float32Array]"]=Nn["[object Float64Array]"]=Nn["[object Int8Array]"]=Nn["[object Int16Array]"]=Nn["[object Int32Array]"]=Nn["[object Number]"]=Nn[Pn]=Nn["[object RegExp]"]=Nn["[object String]"]=Nn["[object Uint8Array]"]=Nn["[object Uint8ClampedArray]"]=Nn["[object Uint16Array]"]=Nn["[object Uint32Array]"]=!0,Nn["[object Error]"]=Nn[$n]=Nn["[object Map]"]=Nn["[object Set]"]=Nn["[object WeakMap]"]=!1;var Ln=Object.prototype.toString;var Un=function t(e,n,r,o,i,s,a){var c;if(r&&(c=i?r(e,o,i):r(e)),void 0!==c)return c;if(!Tn(e))return e;var u=In(e);if(u){if(c=xn(e),!n)return Sn(e,c)}else{var l=Ln.call(e),f=l==$n;if(l!=Pn&&l!=Dn&&(!f||i))return Nn[l]?An(e,l,n):i?e:{};if(On(e))return i?e:{};if(c=Mn(f?{}:e),!n)return jn(c,e)}s||(s=[]),a||(a=[]);for(var d=s.length;d--;)if(s[d]==e)return a[d];return s.push(e),a.push(c),(u?Cn:En)(e,(function(o,i){c[i]=t(o,n,r,i,e,s,a)})),c},Rn=Un,Fn=Ht;var Hn={forEach:Bt,isNumber:Kt,isObject:o,isString:c,isArray:X,isFunction:S,isEmpty:ee,keys:Tt,assign:_e,forIn:ke,omit:rn,cloneDeep:function(t,e,n){return"function"==typeof e?Rn(t,!0,Fn(e,n,3)):Rn(t,!0)},noop:function(){}},Gn={exports:{}};"undefined"!=typeof window?Gn.exports=window:void 0!==t?Gn.exports=t:"undefined"!=typeof self?Gn.exports=self:Gn.exports={};var Yn=Gn.exports,Bn=function(t){try{return encodeURIComponent(t)}catch(t){console.error("error encode %o")}return null},Vn=function(t){try{return decodeURIComponent(t)}catch(t){console.error("error decode %o")}return null},Wn={getItem:function(t){return t&&Vn(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+function(t){return Bn(t).replace(/[\-\.\+\*]/g,"\\$&")}(t)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,n,r,o,i,s){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}var c="";return s&&"NONE"===s.toUpperCase()?c="; Secure; SameSite="+s:(i&&(c+="; Secure"),s&&(c+="; SameSite="+s)),document.cookie=[Bn(t),"=",Bn(e),a,o?"; domain="+o:"",r?"; path="+r:"",c].join(""),!0},removeItem:function(t,e,n){return!!this.hasItem(t)&&(document.cookie=[Bn(t),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",n?"; domain="+n:"",e?"; path="+e:""].join(""),!0)},hasItem:function(t){return!!t&&new RegExp("(?:^|;\\s*)"+Bn(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var t=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/);return t=t.map((function(t){return Vn(t)}))}},Kn=Wn,zn=Hn;var qn=function(t,e,n){var r=zn.assign({},t),o=t.domain.match(/\d*\.\d*\.\d*\.\d*$/),i="localhost"===t.domain,s=t.customDomain,a=new Date;if(a.setSeconds(a.getSeconds()+r.expires),i)n?Kn.setItem(e,n,a,r.path):Kn.removeItem(e,r.path,r.domain);else if(o||s)n?Kn.setItem(e,n,a,r.path,r.domain,!0,"None"):Kn.removeItem(e,r.path,r.domain);else{var c=function(t){for(var e=t.split("."),n=[],r=e.length-1;r>=0;r--)n.push(e.slice(r).join("."));return n}(t.domain),u=c.length,l=0;if(n){if(Kn.getItem(e)===n)return;for(;l<u;l++)if(r.domain=c[l],Kn.setItem(e,n,a,r.path,r.domain,!0,"None"),Kn.getItem(e)===n){t.domain=r.domain;break}}else for(;l<u;l++)Kn.removeItem(e,t.path,c[l])}},Jn=Yn,Xn=200,Zn=304,Qn={"same-origin":"same-origin",include:"include",omit:"omit"},tr=Qn.include;function er(t){var e;try{e=JSON.parse(t)}catch(t){e={}}return e}function nr(){return"fetch"in Jn}function rr(t){return Qn[(t=t||{}).credentials]||tr}function or(t,e,n){var r=(n=n||{}).headers||{};return fetch(t,{method:"POST",headers:r,keepalive:!0,credentials:rr(n),body:JSON.stringify(e)}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.text()})).then((function(t){return er(t)}))}function ir(t,e,n){t.onload=function(){var r;(r=t.status)>=Xn&&r<300||r===Zn?e(er(t.responseText)):n(new Error("Internal XMLHttpRequest error"))},t.onerror=n}function sr(t,e,n){var r,o=(n=n||{}).headers||{},i=new XMLHttpRequest;for(r in i.open(t,e),i.withCredentials=Boolean(rr(n)),o)o.hasOwnProperty(r)&&i.setRequestHeader(r,o[r]);return i}var ar={post:function(t,e,n){return nr()?or(t,e,n):new Promise((function(r,o){var i=sr("POST",t,n);ir(i,r,o),i.send(JSON.stringify(e))}))},get:function(t,e){return e=e||{},nr()?function(t,e){var n=(e=e||{}).headers||{};return fetch(t,{method:"GET",headers:n,credentials:rr(e)}).then((function(t){if(!t.ok)throw Error(t.statusText);return t.text()})).then((function(t){return er(t)}))}(t,e):new Promise((function(n,r){var o=sr("GET",t,e);ir(o,n,r),o.send(null)}))},postWithTimeout:function(t,e,n,r){if(window.AbortController){var o=new window.AbortController,i=or(t,e,Object.assign({},r,{signal:o.signal})),s=setTimeout((function(){o.abort()}),n);return i.finally((function(){clearTimeout(s)}))}return function(t,e,n){var r=new Promise((function(e,r){setTimeout((function(){r(new Error(n))}),t)}));return Promise.race([r,e])}(n,or(t,e,r),"Request Timeout")}},cr=n,ur=Hn,lr=Yn,fr=Wn,dr=qn,hr=ar,pr=ur.noop,gr=cr.invariant;function vr(t,e){gr(ur.isString(t),"Must provide a table"),gr(/^[a-z0-9_]{3,255}$/.test(t),"Table must be between 3 and 255 characters and must consist only of lower case letters, numbers, and _"),gr(ur.isObject(e),"Must provide a record")}var mr="__td_blockEvents",_r="__td_signed";e.BLOCKEVENTSCOOKIE=mr,e.SIGNEDMODECOOKIE=_r,e.blockEvents=function(){dr(this.client.storage,mr,"true")},e.unblockEvents=function(){dr(this.client.storage,mr,"false")},e.areEventsBlocked=function(){return"true"===fr.getItem(mr)},e.setSignedMode=function(){if(this.client.storeConsentByLocalStorage){if(!cr.isLocalStorageAccessible())return this;lr.localStorage.setItem(_r,"true")}else dr(this.client.storage,_r,"true");return this.resetUUID(this.client.storage,this.client.track.uuid),this},e.setAnonymousMode=function(t){if(this.client.storeConsentByLocalStorage){if(!cr.isLocalStorageAccessible())return this;lr.localStorage.setItem(_r,"false")}else dr(this.client.storage,_r,"false");return t||(dr(this.client.storage,this.client.storage.name),this.removeCachedGlobalID(),this.removeServerCookie()),this},e.inSignedMode=function(){return this.client.storeConsentByLocalStorage?!!cr.isLocalStorageAccessible()&&("false"!==lr.localStorage.getItem([_r])&&("true"===lr.localStorage.getItem([_r])||this.client.startInSignedMode)):"false"!==fr.getItem(_r)&&("true"===fr.getItem(_r)||this.client.startInSignedMode)},e._sendRecord=function(t,e,n,r){if(e=e||pr,n=n||pr,!r){var o=["modified="+encodeURIComponent((new Date).getTime())];t.time&&o.push("time="+encodeURIComponent(t.time));var i,s=t.url+"?"+o.join("&"),a="a"===t.record.tag&&!!t.record.href,c={};c.Authorization="TD1 "+t.apikey,c["User-Agent"]=navigator.userAgent,this.inSignedMode()&&this.isGlobalIdEnabled()?(c["Content-Type"]=cr.globalIdAdlHeaders["Content-Type"],c.Accept=cr.globalIdAdlHeaders.Accept):(c["Content-Type"]=cr.adlHeaders["Content-Type"],c.Accept=cr.adlHeaders.Accept),i={events:[t.record]},window.fetch&&(this._windowBeingUnloaded||a)?hr.postWithTimeout(s,i,this.client.jsonpTimeout,{method:"POST",keepalive:!0,credentials:"include",headers:c}).then(e).catch(n):hr.post(s,i,{headers:c}).then(e).catch(n)}},e.applyProperties=function(t,e){return ur.assign({},this.get("$global"),this.get(t),e)},e.addRecord=function(t,e,n,r){vr(t,e);var o=this.applyProperties(t,e),i=this.inSignedMode()?o:ur.omit(o,["td_ip","td_client_id","td_global_id"]),s={apikey:this.client.writeKey,record:i,time:null,type:this.client.requestType,url:this.client.endpoint+this.client.database+"/"+t};s.record.time&&(s.time=s.record.time),this.client.development?this.log("addRecord",s):this.areEventsBlocked()||this._sendRecord(s,n,r,this.areEventsBlocked())},e.addConsentRecord=function(t,e,n,r){vr(t,e);var o={apikey:this.client.writeKey,record:e,time:null,type:this.client.requestType,url:this.client.endpoint+this.client.database+"/"+t};o.record.time&&(o.time=o.record.time),this.client.development?this.log("addConsentRecord",o):this._sendRecord(o,n,r,!1)},e._validateRecord=vr;var yr={},br={GLOBAL:"Treasure",VERSION:"4.2.0",HOST:"in.treasuredata.com",DATABASE:"",PATHNAME:"/"};!function(t){var e=Hn,r=n.invariant,o=br,i=Wn;t.DEFAULT_CONFIG={database:o.DATABASE,development:!1,globalIdCookie:"_td_global",host:o.HOST,logging:!0,pathname:o.PATHNAME,requestType:"fetch",jsonpTimeout:1e4,startInSignedMode:!1,useServerSideCookie:!1,sscDomain:function(){for(var t=document.location.hostname.split("."),e=t.length-2;e>=1;e--){var n=t.slice(e).join("."),r="_td_domain_"+n;if(i.setItem(r,n,3600,"/",n),i.getItem(r)===n)return n}return document.location.hostname},sscServer:function(t){return["ssc",t].join(".")},storeConsentByLocalStorage:!1},t.configure=function(n){return this.client=e.assign({globals:{}},t.DEFAULT_CONFIG,n,{requestType:"fetch"}),function(t){r(e.isObject(t),"Check out our JavaScript SDK Usage Guide: https://github.com/treasure-data/td-js-sdk#api"),r(e.isString(t.writeKey),"Must provide a writeKey"),r(e.isString(t.database),"Must provide a database"),r(/^[a-z0-9_]{3,255}$/.test(t.database),"Database must be between 3 and 255 characters and must consist only of lower case letters, numbers, and _")}(this.client),this.client.endpoint||(this.client.endpoint="https://"+this.client.host+this.client.pathname),this},t.set=function(t,n,r){return e.isObject(t)&&(n=t,t="$global"),this.client.globals[t]=this.client.globals[t]||{},e.isObject(n)?e.assign(this.client.globals[t],n):this.client.globals[t][n]=r,this},t.get=function(t,e){return t=t||"$global",this.client.globals[t]=this.client.globals[t]||{},e?this.client.globals[t][e]:this.client.globals[t]},t.isGlobalIdEnabled=function(){return"td_global_id"===this.get(null,"td_global_id")}}(yr);var kr=br.VERSION,wr={exports:{}};wr.exports=function(t){var e,n=[],r=!1,o=document,i=o.documentElement,s=i.doScroll,a="DOMContentLoaded",c="addEventListener",u="onreadystatechange",l="readyState",f=(s?/^loaded|^c/:/^loaded|c/).test(o[l]);function d(t){for(f=1;t=n.shift();)t()}return o[c]&&o[c](a,e=function(){o.removeEventListener(a,e,r),d()},r),s&&o.attachEvent(u,e=function(){/^c/.test(o[l])&&(o.detachEvent(u,e),d())}),t=s?function(e){self!=top?f?e():n.push(e):function(){try{i.doScroll("left")}catch(n){return setTimeout((function(){t(e)}),50)}e()}()}:function(t){f?t():n.push(t)}}();var Sr=wr.exports,Cr=Hn.forEach,jr=Hn.isString,Er=n.disposable;function xr(t){for(var e,n=[],r=0,o=0;t&&r++<5&&!("html"===(e=Ar(t))||r>1&&o+3*n.length+e.length>=80);)n.push(e),o+=e.length,t=t.parentNode;return n.reverse().join(" > ")}function Ar(t){var e,n,r,o,i,s=[];if(!t||!t.tagName)return"";if(s.push(t.tagName.toLowerCase()),t.id&&s.push("#"+t.id),(e=t.className)&&jr(e))for(n=e.split(" "),i=0;i<n.length;i++)s.push("."+n[i]);var a=["type","name","title","alt"];for(i=0;i<a.length;i++)r=a[i],(o=t.getAttribute(r))&&s.push("["+r+'="'+o+'"]');return s.join("")}function Mr(t,e){return"function"==typeof t.hasAttribute?t.hasAttribute(e):null!==t.getAttribute(e)}var Ir=Yn,Or={addEventListener:function(t,e,n){if(t.addEventListener)return t.addEventListener(e,r,!1),Er((function(){t.removeEventListener(e,r,!1)}));if(t.attachEvent)return t.attachEvent("on"+e,r),Er((function(){t.detachEvent("on"+e,r)}));throw new Error("addEventListener");function r(e){n.call(t,e||window.event)}},createTreeHasIgnoreAttribute:function(t){var e="data-"+t;return function n(r){return!(!r||!r.tagName||"html"===r.tagName.toLowerCase())&&(!(!Mr(r,t)&&!Mr(r,e))||n(r.parentNode))}},getElementData:function(t){var e={tag:t.tagName.toLowerCase(),tree:xr(t)};return Cr(["alt","class","href","id","name","role","title","type"],(function(n){Mr(t,n)&&(e[n]=t.getAttribute(n))})),e},getEventTarget:function(t){var e=t.target||t.srcElement||window.document;return 3===e.nodeType?e.parentNode:e},hasAttribute:Mr,htmlElementAsString:Ar,htmlTreeAsString:xr,findElement:function(t){if(!t||!t.tagName)return null;for(var e=t.tagName.toLowerCase();e&&"body"!==e;e=(t=t.parentNode)&&t.tagName&&t.tagName.toLowerCase()){var n=t.getAttribute("type");if("input"===e&&"password"===n)return null;var r=t.getAttribute("role");if("button"===r||"link"===r||"a"===e||"button"===e||"input"===e)return t}return null}},Tr=Hn.assign,Dr=n.disposable;function $r(t,e){return e}var Pr={configure:function(){this._clickTrackingInstalled=!1},trackClicks:function(t){if(!this._clickTrackingInstalled){var e=this,n=Tr({element:Ir.document,extendClickData:$r,ignoreAttribute:"td-ignore",tableName:"clicks"},t),r=Or.createTreeHasIgnoreAttribute(n.ignoreAttribute),o=Or.addEventListener(n.element,"click",(function(t){var o=Or.findElement(Or.getEventTarget(t));if(o&&!r(o)){var i=Or.getElementData(o),s=n.extendClickData(t,i);s&&e.trackEvent(n.tableName,s)}}));return e._clickTrackingInstalled=!0,Dr((function(){o(),e._clickTrackingInstalled=!1}))}}},Nr=Hn.noop,Lr=n,Ur=Wn,Rr=ar;function Fr(t,e,n){if(n=n||{},!t.global_id)return null;var r=n.path,o=n.domain,i=n.secure,s=n.maxAge||6e3,a=n.sameSite;return Ur.setItem(e,t.global_id,s,r,o,i,a),t.global_id}var Hr={cacheSuccess:Fr,configure:function(){return this},fetchGlobalID:function(t,e,n,r){if(r=r||{},t=t||Nr,e=e||Nr,!this.inSignedMode())return e("not in signed in mode");if(!this.isGlobalIdEnabled())return e("global id is not enabled");var o=this.client.globalIdCookie,i=Ur.getItem(o);if(i&&!n)return setTimeout((function(){t(i)}),0);r.sameSite||(r.sameSite="None");var s="https://"+this.client.host,a={};a.Authorization="TD1 "+this.client.writeKey,a["User-Agent"]=navigator.userAgent,a["Content-Type"]=Lr.globalIdAdlHeaders["Content-Type"],a.Accept=Lr.globalIdAdlHeaders.Accept,Rr.get(s,{headers:a}).then((function(e){var n=Fr(e,o,r);t(n)})).catch((function(t){e(t)}))},removeCachedGlobalID:function(){Ur.removeItem(this.client.globalIdCookie)}},Gr=n.invariant,Yr=Hn,Br=ar,Vr=Yr.noop;var Wr={configure:function(t){return t=Yr.isObject(t)?t:{},this.client.cdpHost=t.cdpHost||"cdp.in.treasuredata.com",this},fetchUserSegments:function(t,e,n){var r=Yr.isObject(t)&&!Yr.isArray(t),o=r?t.audienceToken:t,i=r&&t.keys||{};e=e||Vr,n=n||Vr,Gr("string"==typeof o||Yr.isArray(o),'audienceToken must be a string or array; received "'+o.toString()+'"'),Gr(Yr.isObject(i),'keys must be an object; received "'+i+'"');var s=Yr.isArray(o)?o.join(","):o,a=Yr.keys(i),c=[];Yr.forEach(a,(function(t){c.push(["key.",t,"=",i[t]].join(""))}));var u=c.join("&"),l="https://"+this.client.cdpHost+"/cdp/lookup/collect/segments?version=2&token="+s+(u&&"&"+u);Br.get(l,{headers:{"Content-Type":"application/json"}}).then(e).catch(n)}},Kr={},zr=Yn,qr=function(){var t=(new Date).getTime();return zr.performance&&"function"==typeof zr.performance.now&&(t+=zr.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},Jr=Yn,Xr=Hn,Zr=Wn,Qr=qn,to=qr,eo=kr,no=Jr.document;function ro(t){return Xr.assign({td_version:function(){return eo},td_client_id:function(){return t.uuid},td_charset:function(){return(no.characterSet||no.charset||"-").toLowerCase()},td_language:function(){var t=Jr.navigator;return(t&&(t.language||t.browserLanguage)||"-").toLowerCase()},td_color:function(){return Jr.screen?Jr.screen.colorDepth+"-bit":"-"},td_screen:function(){return Jr.screen?Jr.screen.width+"x"+Jr.screen.height:"-"},td_viewport:function(){var t=no.documentElement&&no.documentElement.clientHeight,e=no.documentElement&&no.documentElement.clientWidth,n=Jr.innerHeight,r=Jr.innerWidth;return(e<r?r:e)+"x"+(t<n?n:t)},td_title:function(){return no.title},td_description:function(){return function(t){for(var e=(no.head||no.getElementsByTagName("head")[0]).getElementsByTagName("meta"),n=e.length,r=0;r<n;r++)if(e[r].getAttribute("name")===t)return(e[r].getAttribute("content")||"").substr(0,8192);return""}("description")},td_url:function(){return no.location&&no.location.href?no.location.href.split("#")[0]:""},td_user_agent:function(){return[Jr.navigator.userAgent,"JSSDK/"+eo].join(";")},td_platform:function(){return Jr.navigator.platform||Jr.navigator.userAgentData.platform},td_host:function(){return no.location.host},td_path:function(){return no.location.pathname},td_referrer:function(){return no.referrer}},t.values)}Kr.configure=function(t){var e;return t=Xr.isObject(t)?t:{},this.client.track=t.track=function(t){return Xr.assign({pageviews:"pageviews",events:"events",values:{}},t)}(t.track),this.client.storage=t.storage="none"!==(e=t.storage)&&(e=Xr.isObject(e)?e:{},Xr.assign({name:"_td",expires:63072e3,domain:no.location.hostname,customDomain:!!e.domain,path:"/"},e)),Xr.isNumber(t.clientId)?t.clientId=t.clientId.toString():t.clientId&&Xr.isString(t.clientId)||(t.storage&&t.storage.name&&(t.clientId=Zr.getItem(t.storage.name)),t.clientId&&"undefined"!==t.clientId||(t.clientId=to())),this.resetUUID(t.storage,t.clientId),this},Kr.resetUUID=function(t,e){var n=e||to(),r=t||this.client.storage;return this.client.track.uuid=n.replace(/\0/g,""),r&&r.expires&&this.inSignedMode()&&(Qr(r,r.name,void 0),Qr(r,r.name,this.client.track.uuid)),this.client.track.values=Xr.assign(ro(this.client.track),this.client.track.values),this},Kr.trackEvent=function(t,e,n,r){return t||(t=this.client.track.events),e=Xr.assign(this.getTrackValues(),e),this.addRecord(t,e,n,r),this},Kr.trackPageview=function(t,e,n){return t||(t=this.client.track.pageviews),this.trackEvent(t,{},e,n),this},Kr.getTrackValues=function(){var t={};return Xr.forIn(this.client.track.values,(function(e,n){e&&(t[n]="function"==typeof e?e():e)})),t};var oo=Hn.noop,io=Wn,so=qn,ao=ar,co="_td_ssc_id";var uo={configure:function(){return this},fetchServerCookie:function(t,e,n){if(t=t||oo,e=e||oo,!this.inSignedMode())return e("not in signed in mode");if(!this.client.useServerSideCookie)return e("server side cookie not enabled");this._serverCookieDomainHost||("function"==typeof this.client.sscDomain?this._serverCookieDomain=this.client.sscDomain():this._serverCookieDomain=this.client.sscDomain,"function"==typeof this.client.sscServer?this._serverCookieDomainHost=this.client.sscServer(this._serverCookieDomain):this._serverCookieDomainHost=this.client.sscServer);var r="https://"+this._serverCookieDomainHost+"/get_cookie_id?cookie_domain="+window.encodeURI(this._serverCookieDomain)+"&r="+(new Date).getTime(),o=io.getItem(co);if(o&&!n)return setTimeout((function(){t(o)}),0);ao.get(r).then((function(e){t(e.td_ssc_id)})).catch(e)},removeServerCookie:function(){if("[object Function]"===Object.prototype.toString.call(this.client.sscDomain)){var t=document.location.hostname.split(".");if(t.length&&t.length>2)for(var e=t.length-2;e>=1;e--){var n=t.slice(e).join(".");so({domain:n},co)}else so({domain:document.location.hostname},co)}else so({domain:this.client.sscDomain},co)}},lo={exports:{}};!function(t){t.exports=function(){var t="millisecond",e="second",n="minute",r="hour",o="day",i="week",s="month",a="quarter",c="year",u="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,f=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},p={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+h(r,2,"0")+":"+h(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,s),i=n-o<0,a=e.clone().add(r+(i?-1:1),s);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:s,y:c,w:i,d:o,D:u,h:r,m:n,s:e,ms:t,Q:a}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",v={};v[g]=d;var m=function(t){return t instanceof k},_=function(t,e,n){var r;if(!t)return g;if("string"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var o=t.name;v[o]=t,r=o}return!n&&r&&(g=r),r||!n&&g},y=function(t,e){if(m(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new k(n)},b=p;b.l=_,b.i=m,b.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var k=function(){function d(t){this.$L=this.$L||_(t.locale,null,!0),this.parse(t)}var h=d.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return b},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(t,e){var n=y(t);return this.startOf(e)<=n&&n<=this.endOf(e)},h.isAfter=function(t,e){return y(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<y(t)},h.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,a){var l=this,f=!!b.u(a)||a,d=b.p(t),h=function(t,e){var n=b.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return f?n:n.endOf(o)},p=function(t,e){return b.w(l.toDate()[t].apply(l.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},g=this.$W,v=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(d){case c:return f?h(1,0):h(31,11);case s:return f?h(1,v):h(0,v+1);case i:var y=this.$locale().weekStart||0,k=(g<y?g+7:g)-y;return h(f?m-k:m+(6-k),v);case o:case u:return p(_+"Hours",0);case r:return p(_+"Minutes",1);case n:return p(_+"Seconds",2);case e:return p(_+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(i,a){var l,f=b.p(i),d="set"+(this.$u?"UTC":""),h=(l={},l[o]=d+"Date",l[u]=d+"Date",l[s]=d+"Month",l[c]=d+"FullYear",l[r]=d+"Hours",l[n]=d+"Minutes",l[e]=d+"Seconds",l[t]=d+"Milliseconds",l)[f],p=f===o?this.$D+(a-this.$W):a;if(f===s||f===c){var g=this.clone().set(u,1);g.$d[h](p),g.init(),this.$d=g.set(u,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[b.p(t)]()},h.add=function(t,a){var u,l=this;t=Number(t);var f=b.p(a),d=function(e){var n=y(l);return b.w(n.date(n.date()+Math.round(e*t)),l)};if(f===s)return this.set(s,this.$M+t);if(f===c)return this.set(c,this.$y+t);if(f===o)return d(1);if(f===i)return d(7);var h=(u={},u[n]=6e4,u[r]=36e5,u[e]=1e3,u)[f]||1,p=this.$d.getTime()+t*h;return b.w(p,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=b.z(this),o=this.$locale(),i=this.$H,s=this.$m,a=this.$M,c=o.weekdays,u=o.months,l=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].substr(0,i)},d=function(t){return b.s(i%12||12,t,"0")},h=o.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:l(o.monthsShort,a,u,3),MMMM:l(u,a),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:l(o.weekdaysMin,this.$W,c,2),ddd:l(o.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:b.s(i,2,"0"),h:d(1),hh:d(2),a:h(i,s,!0),A:h(i,s,!1),m:String(s),mm:b.s(s,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:r};return n.replace(f,(function(t,e){return e||p[t]||r.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(t,u,l){var f,d=b.p(u),h=y(t),p=6e4*(h.utcOffset()-this.utcOffset()),g=this-h,v=b.m(this,h);return v=(f={},f[c]=v/12,f[s]=v,f[a]=v/3,f[i]=(g-p)/6048e5,f[o]=(g-p)/864e5,f[r]=g/36e5,f[n]=g/6e4,f[e]=g/1e3,f)[d]||g,l?v:b.a(v)},h.daysInMonth=function(){return this.endOf(s).$D},h.$locale=function(){return v[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=_(t,e,!0);return r&&(n.$L=r),n},h.clone=function(){return b.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},d}(),w=k.prototype;return y.prototype=w,[["$ms",t],["$s",e],["$m",n],["$H",r],["$W",o],["$M",s],["$y",c],["$D",u]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),y.extend=function(t,e){return t(e,k,y),y},y.locale=_,y.isDayjs=m,y.unix=function(t){return y(1e3*t)},y.en=v[g],y.Ls=v,y}()}(lo);var fo=lo.exports;var ho={exports:{}};
/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   v4.2.8+1e68dce6
	 */!function(e){e.exports=function(){function e(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function n(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,s=void 0,a=function(t,e){b[o]=t,b[o+1]=e,2===(o+=2)&&(s?s(k):S())};function c(t){s=t}function u(t){a=t}var l="undefined"!=typeof window?window:void 0,f=l||{},d=f.MutationObserver||f.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function g(){return function(){return process.nextTick(k)}}function v(){return void 0!==i?function(){i(k)}:y()}function m(){var t=0,e=new d(k),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function _(){var t=new MessageChannel;return t.port1.onmessage=k,function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(k,1)}}var b=new Array(1e3);function k(){for(var t=0;t<o;t+=2)(0,b[t])(b[t+1]),b[t]=void 0,b[t+1]=void 0;o=0}function w(){try{var t=Function("return this")().require("vertx");return i=t.runOnLoop||t.runOnContext,v()}catch(t){return y()}}var S=void 0;function C(t,e){var n=this,r=new this.constructor(x);void 0===r[E]&&K(r);var o=n._state;if(o){var i=arguments[o-1];a((function(){return Y(o,r,i,n._result)}))}else H(n,r,t,e);return r}function j(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(x);return L(n,t),n}S=h?g():d?m():p?_():void 0===l?w():y();var E=Math.random().toString(36).substring(2);function x(){}var A=void 0,M=1,I=2;function O(){return new TypeError("You cannot resolve a promise with itself")}function T(){return new TypeError("A promises callback cannot return that same promise.")}function D(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function $(t,e,n){a((function(t){var r=!1,o=D(n,e,(function(n){r||(r=!0,e!==n?L(t,n):R(t,n))}),(function(e){r||(r=!0,F(t,e))}),"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,F(t,o))}),t)}function P(t,e){e._state===M?R(t,e._result):e._state===I?F(t,e._result):H(e,void 0,(function(e){return L(t,e)}),(function(e){return F(t,e)}))}function N(t,e,r){e.constructor===t.constructor&&r===C&&e.constructor.resolve===j?P(t,e):void 0===r?R(t,e):n(r)?$(t,e,r):R(t,e)}function L(t,n){if(t===n)F(t,O());else if(e(n)){var r=void 0;try{r=n.then}catch(e){return void F(t,e)}N(t,n,r)}else R(t,n)}function U(t){t._onerror&&t._onerror(t._result),G(t)}function R(t,e){t._state===A&&(t._result=e,t._state=M,0!==t._subscribers.length&&a(G,t))}function F(t,e){t._state===A&&(t._state=I,t._result=e,a(U,t))}function H(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+M]=n,o[i+I]=r,0===i&&t._state&&a(G,t)}function G(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?Y(n,r,o,i):o(i);t._subscribers.length=0}}function Y(t,e,r,o){var i=n(r),s=void 0,a=void 0,c=!0;if(i){try{s=r(o)}catch(t){c=!1,a=t}if(e===s)return void F(e,T())}else s=o;e._state!==A||(i&&c?L(e,s):!1===c?F(e,a):t===M?R(e,s):t===I&&F(e,s))}function B(t,e){try{e((function(e){L(t,e)}),(function(e){F(t,e)}))}catch(e){F(t,e)}}var V=0;function W(){return V++}function K(t){t[E]=V++,t._state=void 0,t._result=void 0,t._subscribers=[]}function z(){return new Error("Array Methods must be provided an Array")}var q=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(x),this.promise[E]||K(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&R(this.promise,this._result))):F(this.promise,z())}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===j){var o=void 0,i=void 0,s=!1;try{o=t.then}catch(t){s=!0,i=t}if(o===C&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===et){var a=new n(x);s?F(a,i):N(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===A&&(this._remaining--,t===I?F(r,n):this._result[e]=n),0===this._remaining&&R(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;H(t,void 0,(function(t){return n._settledAt(M,e,t)}),(function(t){return n._settledAt(I,e,t)}))},t}();function J(t){return new q(this,t).promise}function X(t){var e=this;return r(t)?new e((function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function Z(t){var e=new this(x);return F(e,t),e}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function t(e){this[E]=W(),this._result=this._state=void 0,this._subscribers=[],x!==e&&("function"!=typeof e&&Q(),this instanceof t?B(this,e):tt())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,r=e.constructor;return n(t)?e.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):e.then(t,t)},t}();function nt(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=et}return et.prototype.then=C,et.all=J,et.race=X,et.resolve=j,et.reject=Z,et._setScheduler=c,et._setAsap=u,et._asap=a,et.polyfill=nt,et.Promise=et,et}()}(ho);var po=Hn,go=fo,vo=Yn,mo=qr,_o=n.camelCase,yo=n.isLocalStorageAccessible;ho.exports.polyfill();const bo="td_consent_preferences",ko="td_cm_consent",wo="td_cm_context",So="YYYY-MM-DD",Co="treasuredata",jo={GIVEN:"given",REFUSED:"refused",NOTGIVEN:"notgiven",EXPIRED:"expired"};Promise.prototype.finally=Promise.prototype.finally||{finally(t){const e=e=>Promise.resolve(t()).then(e);return this.then((t=>e((()=>t))),(t=>e((()=>Promise.reject(t)))))}}.finally;var Eo={configure(t={}){const e=t.consentManager||{},n=document.location.hostname,{storageKey:r=bo,consentTable:o=ko,contextTable:i=wo,successConsentCallback:s=po.noop,failureConsentCallback:a=po.noop,expiredConsentsCallback:c=po.noop,dateFormat:u=So,issuer:l=Co,container:f}=e;this.defaultContext={brand:n,domain_name:n,collection_type:n,collection_point_id:n,context_id:mo(),consents:{}},this.consentManager={storageKey:r,successConsentCallback:s,failureConsentCallback:a,expiredConsentsCallback:c,consentTable:o,contextTable:i,dateFormat:u,issuer:l,container:f,states:{...jo}},this.consentManager.preferences=this.getPreferences()||{},this._updateExpiredConsents(),this.consentManager.expiredConsentsCallback(this.getExpiredConsents())},_getContainer:t=>po.isString(t)?document.querySelector(t):po.isObject(t)?t:document.body,_getNormalizedConsent(t,e){return{description:e.description,datatype:e.datatype,status:e.status,expiry_date:e.expiry_date||null,issuer:this.consentManager.issuer,identifier:this.client.track.uuid,purpose:t,context_id:e.context_id}},_normalizeConsents(){var t={},e={};for(const n in this.consentManager.preferences){const r=this.consentManager.preferences[n];for(const n in r.consents){const o=r.consents[n];o._updated?t[n]=this._getNormalizedConsent(n,o):e[n]=this._getNormalizedConsent(n,o)}}return po.isEmpty(t)?e:t},_stringifyPreferences(){const t=po.cloneDeep(this.consentManager.preferences);for(const e in t){const n=t[e].consents;for(const t in n){const e=n[t].expiry_date;po.isEmpty(e)||(n[t].expiry_date=go(e).format(this.consentManager.dateFormat)),n[t].identifier=this.client.track.uuid,n[t]=po.omit(n[t],["_updated"])}}return JSON.stringify(t)},_isValidStatus:t=>!(!t||!po.isString(t))&&((t=t.toLowerCase())===jo.GIVEN||t===jo.REFUSED||t===jo.NOTGIVEN||t===jo.EXPIRED),_isExpired(t){const e=new Date;return t.status===jo.GIVEN&&t.expiry_date&&go(t.expiry_date).isBefore(go(e))},_updateExpiredConsents(){var t=!1;if(!po.isEmpty(this.consentManager.preferences))for(const e in this.consentManager.preferences){const n=this.consentManager.preferences[e].consents||{};for(const e in n){const r=n[e];this._isExpired(r)&&(r.status=jo.EXPIRED,r._updated=!0,t=!0)}}t&&this.saveConsents(po.noop,po.noop)},getPreferences(){if(!yo())return null;const t=JSON.parse(vo.localStorage.getItem(this.consentManager.storageKey))||null;if(t)for(const e in t){const n=t[e].consents;for(const t in n){const e=n[t].expiry_date;po.isEmpty(e)||(n[t].expiry_date=go(e,this.consentManager.dateFormat).valueOf()),n[t].identifier=this.client.track.uuid}}return t},_savePreferences(){yo()&&!po.isEmpty(this.consentManager.preferences)&&vo.localStorage.setItem(this.consentManager.storageKey,this._stringifyPreferences())},_getPromise(t){return new Promise(((e,n)=>{this.addConsentRecord(this.consentManager.consentTable,t,e,n)}))},_resetUpdatedStatus(){for(const t in this.consentManager.preferences){const e=this.consentManager.preferences[t].consents;for(const t in e){const n=e[t];n._updated&&(n._updated=!1)}}},saveContexts(t=po.noop,e=po.noop){this._savePreferences();const n=Object.keys(this.consentManager.preferences).reduce(((t,e)=>{const n=this.consentManager.preferences[e],r=po.omit(n,["consents"]);return t.push(r),t}),[]).map((t=>new Promise(((e,n)=>{this.addConsentRecord(this.consentManager.contextTable,t,e,n)}))));Promise.all(n).then(t).catch(e)},saveConsents(t,e){t=t||this.consentManager.successConsentCallback||po.noop,e=e||this.consentManager.failureConsentCallback||po.noop,this._savePreferences();var n,r=[],o=[];for(const t in this.consentManager.preferences){const e=this.consentManager.preferences[t].consents;for(const t in e){const n=e[t],i=this._getNormalizedConsent(t,n);n._updated?r.push(i):o.push(i)}}n=po.isEmpty(r)?o.map((t=>this._getPromise(t))):r.map((t=>this._getPromise(t))),Promise.all(n).then((()=>{t(this._normalizeConsents())}),(t=>{e({success:!1,message:t.message})})).finally((()=>{po.isEmpty(r)||this._resetUpdatedStatus()}))},addContext(t={}){if(po.isEmpty(t))return;var e,n;e=po.isString(t.context_id)?t.context_id:po.isFunction(t.context_id)?t.context_id():mo();const r=this.consentManager.preferences[e];return n=r?po.assign({},r,t):po.assign({},t,{context_id:e,consents:{}}),this.consentManager.preferences[e]=n,e},addConsents(t={}){if(!po.isEmpty(t))for(const s in t){const a=this._isValidStatus(t[s].status)?t[s].status:jo.NOTGIVEN;var e,n=t[s].context_id,r=t[s].expiry_date||"";n||(n=this.defaultContext.context_id,this.consentManager.preferences[n]||(this.consentManager.preferences[n]=this.defaultContext));var o=this.consentManager.preferences[n],i=o&&o.consents[s];if(!po.isEmpty(r)&&(po.isString(r)||po.isNumber(r)||po.isObject(r))){const t=go(r,this.consentManager.dateFormat);r=t.isValid()?t.valueOf():""}else r="";(e=po.isEmpty(i)?po.assign({},t[s],{key:_o(s),status:a,identifier:this.client.track.uuid,context_id:n}):po.assign({},i,t[s])).issuer=this.consentManager.issuer,e.expiry_date=r,this.consentManager.preferences[n].consents[s]=e}},updateConsent(t,e={}){if(po.isEmpty(this.consentManager.preferences[t])||po.isEmpty(e))return;const[n]=Object.keys(e),r=this.consentManager.preferences[t].consents;for(const t in r)if(_o(t)===_o(n)){var o=e[n].status||"",i=e[n].expiry_date||"";if(this._isValidStatus(o)||(o=r[n].status),!po.isEmpty(i)&&(po.isString(i)||po.isNumber(i)||po.isObject(i))){const t=go(i,this.consentManager.dateFormat);i=t.isValid()?t.valueOf():r[n].expiry_date}else i=r[n].expiry_date;const t=po.omit(r[n],["expiry_date","status"]);r[n]=po.assign(t,po.omit(e[n],["expiry_date","status"]),{identifier:this.client.track.uuid,status:o,expiry_date:i}),r[n]._updated=!0;break}},updateContext(t,e={}){const n=this.consentManager.preferences[t];if(!po.isEmpty(n)&&!po.isEmpty(e)){var r=po.omit(n,["consents"]);r=po.assign({},r,e),this.consentManager.preferences[t]=po.assign({},n,r)}},getConsentExpiryDate(t,e){if(!t||!e)return;const n=this.consentManager.preferences[t].consents[e];return n&&n.expiry_date||null},getConsents(){const t=po.isEmpty(this.consentManager.preferences)?this.getPreferences():this.consentManager.preferences;return Object.keys(t||{}).reduce(((e,n)=>{const r=t[n],o=r.consents,i=po.omit(r,["consents"]);for(const t in o){const n=po.assign({},i,{status:o[t].status,datatype:o[t].datatype||"",description:o[t].description||"",expiry_date:o[t].expiry_date||"",identifier:this.client.track.uuid,purpose:t});e.push(n)}return e}),[])},getContexts(){const t=po.isEmpty(this.consentManager.preferences)?this.getPreferences():this.consentManager.preferences;return Object.keys(t||{}).reduce(((e,n)=>{const r=t[n],o=po.omit(r,["consents"]);return e.push(o),e}),[])},getExpiredConsents(){return this.getConsents().filter((t=>t.status===jo.EXPIRED||this._isExpired(t)))}},xo={},Ao=Hn;function Mo(t){return Io()[t]||null}function Io(){var t=document.cookie;return t?t.split(";").reduce((function(t,e){var n=e.split("=");return t[n[0].trim()]=n[1],t}),{}):{}}function Oo(t){var e=window.location.search;return new URLSearchParams(e).get(t)}xo.configure=function(){};var To={getGoogle_gclid_Param:function(){return{gclid:Oo("gclid")}},getGoogle_wbraid_Param:function(){return{wbraid:Oo("wbraid")}},getGoogle_ga_Cookie:function(){return{_ga:Mo("_ga")}},getGoogle_gcl_Cookies:function(t){return function(t){var e=Io();return Object.keys(e).reduce((function(n,r){return r.startsWith(t)&&(n[r]=e[r]),n}),{})}(t.gclPrefix||"_gcl")},getFacebook_fbp_Cookie:function(){return{_fbp:Mo("_fbp")}},getFacebook_fbc_Cookie:function(){return{_fbc:Mo("_fbc")}},getFacebook_fbclid_Param:function(){return{fbclid:Oo("fbclid")}},getInstagram_shbts_Cookie:function(){return{shbts:Mo("shbts")}},getInstagram_shbid_Cookie:function(){return{shbid:Mo("shbid")}},getInstagram_ds_user_id_Cookie:function(){return{ds_user_id:Mo("ds_user_id")}},getInstagram_ig_did_Cookie:function(){return{ig_did:Mo("ig_did")}},getYahoo_yclid_Param:function(){return{yclid:Oo("yclid")}},getYahoo_yj_r_Param:function(){return{yj_r:Oo("yj_r")}},getYahoo_ycl_yjad_Cookie:function(){return{_ycl_yjad:Mo("_ycl_yjad")}},getYahoo_yjr_yjad_Cookie:function(){return{_yjr_yjad:Mo("_yjr_yjad")}},getYahoo_yjsu_yjad_Cookie:function(){return{_yjsu_yjad:Mo("_yjsu_yjad")}},getLine_lt_cid_Cookie:function(){return{__lt_cid:Mo("__lt__cid")}},getLine_lt_sid_Cookie:function(){return{__lt_sid:Mo("__lt__sid")}},getLine_ldtag_cl_Param:function(){return{ldtag_cl:Oo("ldtag_cl")}},getX_twclid_Param:function(){return{twclid:Oo("twclid")}},getX_twclid_Cookie:function(){return{_twclid:Mo("_twclid")}},getPinterest_epik_Param:function(){return{epik:Oo("epik")}},getPinterest_epik_Cookie:function(){return{_epik:Mo("_epik")}},getSnapchat_sccid_Param:function(){return{ScCid:Oo("ScCid")}},getTiktok_ttp_Cookie:function(){return{_ttp:Mo("_ttp")}},getMarketo_mkto_trk_Cookie:function(){return{_mkto_trk:Mo("_mkto_trk")}},getTealium_utag_main_Cookie:function(){return{utag_main:Mo("utag_main")}}},Do={google_ads:["getGoogle_gclid_Param","getGoogle_wbraid_Param"],google_ga:["getGoogle_ga_Cookie"],google_mp:["getGoogle_gcl_Cookies"],meta:["getFacebook_fbp_Cookie","getFacebook_fbc_Cookie","getFacebook_fbclid_Param"],instagram:["getInstagram_shbts_Cookie","getInstagram_shbid_Cookie","getInstagram_ds_user_id_Cookie","getInstagram_ig_did_Cookie"],yahoojp_ads:["getYahoo_yclid_Param","getYahoo_yj_r_Param","getYahoo_ycl_yjad_Cookie","getYahoo_yjr_yjad_Cookie","getYahoo_yjsu_yjad_Cookie"],line:["getLine_lt_cid_Cookie","getLine_lt_sid_Cookie","getLine_ldtag_cl_Param"],x:["getX_twclid_Param","getX_twclid_Cookie"],pinterest:["getPinterest_epik_Param","getPinterest_epik_Cookie"],snapchat:["getSnapchat_sccid_Param"],tiktok:["getTiktok_ttp_Cookie"],marketo:["getMarketo_mkto_trk_Cookie"],tealium:["getTealium_utag_main_Cookie"]};xo.collectTags=function(t={},e={}){var n=Ao.isEmpty(t.vendors)&&Ao.isEmpty(t.cookies)&&Ao.isEmpty(t.params),r={};Ao.isEmpty(t)||n?r=function(t={}){var e={};return Object.keys(Do).forEach((function(n){var r=Do[n].reduce((function(e,n){return Object.assign(e,To[n].call(null,t))}),{});e=Object.assign(e,r)})),Object.keys(e).reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),{})}(e):(Ao.isEmpty(t.vendors)||(r=Object.assign(r,function(t=[],e={}){return t.reduce((function(t,n){return(Do[n]||[]).forEach((function(n){t=Object.assign(t,To[n].call(null,e))})),t}),{})}(t.vendors,e))),Ao.isEmpty(t.cookies)||(r=Object.assign(r,function(t=[]){return t.reduce((function(t,e){return Object.assign(t,{[e]:Mo(e)})}),{})}(t.cookies))),Ao.isEmpty(t.params)||(r=Object.assign(r,function(t=[]){return t.reduce((function(t,e){return Object.assign(t,{[e]:Oo(e)})}),{})}(t.params)))),Object.keys(r).forEach(function(t){this.set("$global",t,r[t])}.bind(this))};var $o=e,Po=Hn,No=yr,Lo=kr,Uo=Wn,Ro=br;function Fo(t){return this instanceof Fo?(this.init(t),this):new Fo(t)}Fo.prototype.init=function(t){for(var e in this.configure(t),Fo.Plugins)Fo.Plugins.hasOwnProperty(e)&&Fo.Plugins[e].configure.call(this,t);if(window.addEventListener){var n=this;window.addEventListener("pagehide",(function(){n._windowBeingUnloaded=!0}))}},Fo.version=Fo.prototype.version=Lo,Fo.prototype.log=function(){for(var t=["["+Ro.GLOBAL+"]"],e=0,n=arguments.length-1;e<=n;e++)t.push(arguments[e]);"undefined"!=typeof console&&this.client.logging&&console.log.apply(console,t)},Fo.prototype.configure=No.configure,Fo.prototype.set=No.set,Fo.prototype.get=No.get,Fo.prototype.isGlobalIdEnabled=No.isGlobalIdEnabled,Fo.prototype.ready=Sr,Fo.prototype.applyProperties=$o.applyProperties,Fo.prototype.addRecord=$o.addRecord,Fo.prototype.addConsentRecord=$o.addConsentRecord,Fo.prototype._sendRecord=$o._sendRecord,Fo.prototype.blockEvents=$o.blockEvents,Fo.prototype.unblockEvents=$o.unblockEvents,Fo.prototype.areEventsBlocked=$o.areEventsBlocked,Fo.prototype.setSignedMode=$o.setSignedMode,Fo.prototype.setAnonymousMode=$o.setAnonymousMode,Fo.prototype.inSignedMode=$o.inSignedMode,Fo.prototype.getCookie=Uo.getItem,Fo.prototype._configurator=No,Fo.Plugins={Clicks:Pr,GlobalID:Hr,Personalization:Wr,Track:Kr,ServerSideCookie:uo,ConsentManager:Eo,ConversionAPI:xo},Po.forIn(Fo.Plugins,(function(t){Po.forIn(t,(function(t,e){Fo.prototype[e]||(Fo.prototype[e]=t)}))}));var Ho=Hn,Go=Yn;var Yo=["init","set","collectTags","blockEvents","unblockEvents","setSignedMode","setAnonymousMode","resetUUID","addRecord","fetchGlobalID","trackPageview","trackEvent","trackClicks","fetchUserSegments","fetchServerCookie","ready"],Bo=Fo,Vo=Yn,Wo=br.GLOBAL;(function(t,e){if(Ho.isObject(Go[e])){var n=Go[e],r=n.clients;Ho.forIn(t.prototype,(function(t,e){n.prototype[e]=t})),Ho.forEach(r,(function(t){Ho.forEach(Yo,(function(e){!function(t,e){var n="_"+e;if(t[n]){for(var r=t[n]||[];r.length;)t[e].apply(t,r.shift());delete t[n]}}(t,e)}))}))}})(Bo,Wo),Vo[Wo]=Bo}();
