<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>event</title>
  <meta name="description" content="test that event tracking works"></meta>
  <script src="/dist/td.js"></script>
</head>
<body>

<script type="text/javascript">
  (function () {
    function setBackground (color) {
      document.body.style.background = color
    }

    function getBackground () {
      return document.body.style.background
    }

    function setStatus (text) {
      document.getElementById('status').innerHTML = text
    }

    var td = new Treasure({
      database: 'test_db_request',
      writeKey: '91/96da3cfb876cc50724d0dddef670d95eea2a0018',
      host: 'in-staging.treasuredata.com'
    })
    td.fetchUserSegments({
      audienceToken: ['4ea246a5-7e9e-4d05-a789-5e038e4ddf1d'],
      keys: {
        user: 'abc'
      }
    }, function () {
      setBackground('green')
      setStatus('success')
    }, function () {
      setBackground('red')
      setStatus('failure')
    })

  })()
</script>

<h1 id='status' style="text-align: center;">running</h1>

</body>
</html>
